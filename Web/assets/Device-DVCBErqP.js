import{_ as b,c as k,o as y,b as t,t as i,n as r,g as h,u as v}from"./index-hfvNnKQ2.js";import{a as D}from"./index-NIGUFBhG.js";const C={name:"Device",data(){return{route:v(),status:{id:null,device_id:null,source:null,timestamp:[],battery:{charging:[],level:null,temperature:null,capacity:null},network:{wifiConnected:[],wifiSSID:null,mobileDataActive:[],mobileSignalDbm:null,networkType:null,trafficUsedMb:null,uploadSpeedKbps:null,downloadSpeedKbps:null},foreground:{appName:null,appTitle:null,speakerPlaying:[]},other:{screenOn:[],isChargingViaUSB:[],isChargingViaAC:[],isLowPowerMode:[]}}}},mounted(){h.on("refresh",this.getStatus),this.getStatus()},beforeUnmount(){h.off("refresh",this.getStatus)},methods:{async getStatus(){const o=JSON.parse(localStorage.getItem("config"));try{const s=this.$refs.original,a=await D.get(`${o.serverUrl}/api/status/${o.userId}/${this.route.params.id}`,{validateStatus:()=>!0});if(s.innerHTML=JSON.stringify(a.data,null,2),a.data.code!==0){this.$toast.error(a.data.message);return}this.status={id:a.data.status.id,device_id:a.data.status.device_id,source:a.data.status.source,timestamp:[this.formatTimestamp(a.data.status.timestamp),a.data.status.timestamp+300*1e3<Date.now()?"no":"yes",this.formatTime(a.data.status.timestamp)],battery:{charging:[a.data.status.battery.charging===1?"充电中":a.data.status.battery.charging===2?"未充电":"已充满",a.data.status.battery.charging===1?"yes":a.data.status.battery.charging===2?"no":""],level:a.data.status.battery.level+" %",temperature:a.data.status.battery.temperature+" ℃",capacity:this.formatCapacity(a.data.status.battery.capacity)},network:{wifiConnected:[a.data.status.network.wifi_connected===1?"已连接 ✅":a.data.status.network.wifi_connected===2?"未连接 ❌":"未知",a.data.status.network.wifi_connected===1?"yes":a.data.status.network.wifi_connected===2?"no":""],wifiSSID:a.data.status.network.wifi_ssid,mobileDataActive:[a.data.status.network.mobile_data_active===1?"已激活 ✅":a.data.status.network.mobile_data_active===2?"未激活 ❌":"未知",a.data.status.network.mobile_data_active===1?"yes":a.data.status.network.mobile_data_active===2?"no":""],mobileSignalDbm:a.data.status.network.mobile_signal_dbm+" dBm",networkType:a.data.status.network.network_type,trafficUsedMb:this.formatTraffic(a.data.status.network.traffic_used_mb),uploadSpeedKbps:this.formatSpeed(a.data.status.network.upload_speed_kbps),downloadSpeedKbps:this.formatSpeed(a.data.status.network.download_speed_kbps)},foreground:{appName:a.data.status.foreground.app_name,appTitle:a.data.status.foreground.app_title,speakerPlaying:[a.data.status.foreground.speaker_playing===1?"正在播放 ✅":a.data.status.foreground.speaker_playing===2?"未播放 ❌":"未知",a.data.status.foreground.speaker_playing===1?"yes":a.data.status.foreground.speaker_playing===2?"no":""]},other:{screenOn:[a.data.status.other.screen_on===1?"屏幕已打开 ✅":a.data.status.other.screen_on===2?"屏幕已关闭 ❌":"未知",a.data.status.other.screen_on===1?"yes":a.data.status.other.screen_on===2?"no":""],isChargingViaUSB:[a.data.status.other.is_charging_via_usb===1?"通过 USB 充电 ✅":a.data.status.other.is_charging_via_usb===2?"未通过 USB 充电 ❌":"未知",a.data.status.other.is_charging_via_usb===1?"yes":a.data.status.other.is_charging_via_usb===2?"no":""],isChargingViaAC:[a.data.status.other.is_charging_via_ac===1?"通过 AC 充电 ✅":a.data.status.other.is_charging_via_ac===2?"未通过 AC 充电 ❌":"未知",a.data.status.other.is_charging_via_ac===1?"yes":a.data.status.other.is_charging_via_ac===2?"no":""],isLowPowerMode:[a.data.status.other.is_low_power_mode===1?"低功耗模式 ✅":a.data.status.other.is_low_power_mode===2?"非低功耗模式 ❌":"未知",a.data.status.other.is_low_power_mode===1?"yes":a.data.status.other.is_low_power_mode===2?"no":""]}}}catch(s){console.error(s),this.$toast.error("获取状态失败")}},formatTimestamp(o){const s=new Date(o),a=s.getFullYear(),l=String(s.getMonth()+1).padStart(2,"0"),e=String(s.getDate()).padStart(2,"0"),u=String(s.getHours()).padStart(2,"0"),p=String(s.getMinutes()).padStart(2,"0"),d=String(s.getSeconds()).padStart(2,"0"),g=String(s.getMilliseconds()).padStart(3,"0");return`${a}-${l}-${e} ${u}:${p}:${d}:${g}`},formatTime(o){const s=new Date(o),l=new Date-s,e=l%1e3,u=Math.floor(l/1e3),p=u%60,d=Math.floor(u/60),g=d%60,c=Math.floor(d/60),_=c%24,m=Math.floor(c/24),f=Math.floor(m/30)%12,w=Math.floor(m/365),S=m%30,n=[];return w>0&&n.push(`${w} 年`),f>0&&n.push(`${f} 个月`),S>0&&n.push(`${S} 天`),_>0&&n.push(`${_} 小时`),g>0&&n.push(`${g} 分钟`),p>0&&n.push(`${p} 秒`),e>0&&n.push(`${e} 毫秒`),n.length===0?"刚刚":n.join(" ")+"前"},formatCapacity(o){return o>=1e3?(o/1e3).toFixed(2)+" Ah":o.toFixed(0)+" mAh"},formatTraffic(o){return o>=1024?(o/1024).toFixed(2)+" GB":o+" MB"},formatSpeed(o){return o>=1e6?(o/1e6).toFixed(2)+" Gbps":o>=1e3?(o/1e3).toFixed(2)+" Mbps":o+" Kbps"}}},T={class:"device"},A={class:"status-grid"},M={class:"status-card"},O=["title"],N=["title"],U=["title"],I={class:"status-card"},L=["title"],E=["title"],B=["title"],F=["title"],P={class:"status-card"},V=["title"],x=["title"],R={class:"status-card"},H=["title"],Y=["title"],K=["title"],G=["title"],W={class:"status-card"},J=["title"],j=["title"],z={class:"status-card"},q=["title"],Q=["title"],X=["title"],Z={class:"status-card"},$=["title"],tt=["title"],st=["title"],et=["title"],at={class:"status-card code"},it={ref:"original"};function ot(o,s,a,l,e,u){return y(),k("div",T,[t("h1",null,i(this.status.timestamp[0]),1),t("div",A,[t("div",M,[s[3]||(s[3]=t("div",{class:"title"},"📱 设备状态",-1)),t("p",{title:e.status.device_id},[s[0]||(s[0]=t("span",{class:"item-title"},"设备ID: ",-1)),t("span",null,i(e.status.device_id),1)],8,O),t("p",{title:e.status.source},[s[1]||(s[1]=t("span",{class:"item-title"},"来源: ",-1)),t("span",null,i(e.status.source),1)],8,N),t("p",{title:e.status.timestamp[2]},[s[2]||(s[2]=t("span",{class:"item-title"},"时效性: ",-1)),t("span",{class:r(e.status.timestamp[1])},i(e.status.timestamp[2]),3)],8,U)]),t("div",I,[s[8]||(s[8]=t("div",{class:"title"},"🔋 电池状态",-1)),t("p",{title:e.status.battery.charging[0]},[s[4]||(s[4]=t("span",{class:"item-title"},"充电状态: ",-1)),t("span",{class:r(e.status.battery.charging[1])},i(e.status.battery.charging[0]),3)],8,L),t("p",{title:e.status.battery.level},[s[5]||(s[5]=t("span",{class:"item-title"},"电量: ",-1)),t("span",null,i(e.status.battery.level),1)],8,E),t("p",{title:e.status.battery.temperature},[s[6]||(s[6]=t("span",{class:"item-title"},"温度: ",-1)),t("span",null,i(e.status.battery.temperature),1)],8,B),t("p",{title:e.status.battery.capacity},[s[7]||(s[7]=t("span",{class:"item-title"},"电池总容量: ",-1)),t("span",null,i(e.status.battery.capacity),1)],8,F)]),t("div",P,[s[11]||(s[11]=t("div",{class:"title"},"📶 网络状态",-1)),t("p",{title:e.status.network.wifiConnected[0]},[s[9]||(s[9]=t("span",{class:"item-title"},"WiFi: ",-1)),t("span",{class:r(e.status.network.wifiConnected[1])},i(e.status.network.wifiConnected[0]),3)],8,V),t("p",{title:e.status.network.wifiSSID},[s[10]||(s[10]=t("span",{class:"item-title"},"WiFi名称: ",-1)),t("span",null,i(e.status.network.wifiSSID),1)],8,x)]),t("div",R,[s[16]||(s[16]=t("div",{class:"title"},"📶 流量状态",-1)),t("p",{title:e.status.network.mobileDataActive[0]},[s[12]||(s[12]=t("span",{class:"item-title"},"是否启用流量: ",-1)),t("span",{class:r(e.status.network.mobileDataActive[1])},i(e.status.network.mobileDataActive[0]),3)],8,H),t("p",{title:e.status.network.mobileSignalDbm},[s[13]||(s[13]=t("span",{class:"item-title"},"移动网络信号强度: ",-1)),t("span",null,i(e.status.network.mobileSignalDbm),1)],8,Y),t("p",{title:e.status.networkType},[s[14]||(s[14]=t("span",{class:"item-title"},"网络类型: ",-1)),t("span",null,i(e.status.network.networkType),1)],8,K),t("p",{title:e.status.network.trafficUsedMb},[s[15]||(s[15]=t("span",{class:"item-title"},"今日流量使用: ",-1)),t("span",null,i(e.status.network.trafficUsedMb),1)],8,G)]),t("div",W,[s[19]||(s[19]=t("div",{class:"title"},"💨 网速状态",-1)),t("p",{title:e.status.network.uploadSpeedKbps},[s[17]||(s[17]=t("span",{class:"item-title"},"上传速度: ",-1)),t("span",null,i(e.status.network.uploadSpeedKbps),1)],8,J),t("p",{title:e.status.network.downloadSpeedKbps},[s[18]||(s[18]=t("span",{class:"item-title"},"下载速度: ",-1)),t("span",null,i(e.status.network.downloadSpeedKbps),1)],8,j)]),t("div",z,[s[23]||(s[23]=t("div",{class:"title"},"🖥️ 前台应用状态",-1)),t("p",{title:e.status.foreground.appName},[s[20]||(s[20]=t("span",{class:"item-title"},"前台包名: ",-1)),t("span",null,i(e.status.foreground.appName),1)],8,q),t("p",{title:e.status.foreground.appTitle},[s[21]||(s[21]=t("span",{class:"item-title"},"窗口标题: ",-1)),t("span",null,i(e.status.foreground.appTitle),1)],8,Q),t("p",{title:e.status.foreground.speakerPlaying[0]},[s[22]||(s[22]=t("span",{class:"item-title"},"扬声器播放: ",-1)),t("span",{class:r(e.status.foreground.speakerPlaying[1])},i(e.status.foreground.speakerPlaying[0]),3)],8,X)]),t("div",Z,[s[28]||(s[28]=t("p",{class:"title"},"⚙️ 其他状态",-1)),t("p",{title:e.status.other.screenOn[0]},[s[24]||(s[24]=t("span",{class:"item-title"},"屏幕点亮: ",-1)),t("span",{class:r(e.status.other.screenOn[1])},i(e.status.other.screenOn[0]),3)],8,$),t("p",{title:e.status.other.isChargingViaUSB[0]},[s[25]||(s[25]=t("span",{class:"item-title"},"USB充电: ",-1)),t("span",{class:r(e.status.other.isChargingViaUSB[1])},i(e.status.other.isChargingViaUSB[0]),3)],8,tt),t("p",{title:e.status.other.isChargingViaAC[0]},[s[26]||(s[26]=t("span",{class:"item-title"},"AC充电: ",-1)),t("span",{class:r(e.status.other.isChargingViaAC[1])},i(e.status.other.isChargingViaAC[0]),3)],8,st),t("p",{title:e.status.other.isLowPowerMode[0]},[s[27]||(s[27]=t("span",{class:"item-title"},"省电模式: ",-1)),t("span",{class:r(e.status.other.isLowPowerMode[1])},i(e.status.other.isLowPowerMode[0]),3)],8,et)])]),t("div",at,[s[29]||(s[29]=t("p",{class:"title"},"🈚 原始响应",-1)),t("pre",null,[t("code",it,null,512)])])])}const lt=b(C,[["render",ot],["__scopeId","data-v-dbf7872f"]]);export{lt as default};
