import{_ as g,c as m,o as _,b as s,t as a,n as o,g as u,u as c}from"./index-eDImELfl.js";import{a as w}from"./index-NIGUFBhG.js";const f={name:"Device",data(){return{route:c(),status:{id:null,device_id:null,timestamp:[],battery:{charging:[],level:null,temperature:null,capacity:null},network:{wifiConnected:[],wifiSSID:null,mobileDataActive:[],mobileSignalDbm:null,networkType:null,trafficUsedMb:null,uploadSpeedKbps:null,downloadSpeedKbps:null},foreground:{appName:null,appTitle:null,speakerPlaying:[]},other:{screenOn:[],isChargingViaUSB:[],isChargingViaAC:[],isLowPowerMode:[]}}}},mounted(){u.on("refresh",this.getStatus)},beforeUnmount(){u.off("refresh",this.getStatus)},created(){this.getStatus()},methods:{async getStatus(){const i=JSON.parse(localStorage.getItem("config"));try{const t=await w.get(`${i.serverUrl}/api/status/${this.route.params.id}`,{validateStatus:()=>!0});if(t.data.code!==0){this.$toast.error(t.data.message);return}const n=this.$refs.original;n.innerHTML=JSON.stringify(t.data,null,2),this.status={id:t.data.status.id,device_id:t.data.status.device_id,timestamp:[this.formatTimestamp(t.data.status.timestamp),t.data.status.timestamp+5<Date.now()?"正常":"过期"],battery:{charging:[t.data.status.battery.charging===1?"充电中":t.data.status.battery.charging===2?"未充电":"已充满",t.data.status.battery.charging===1?"yes":t.data.status.battery.charging===2?"no":""],level:t.data.status.battery.level+" %",temperature:t.data.status.battery.temperature+" ℃",capacity:this.formatCapacity(t.data.status.battery.capacity)},network:{wifiConnected:[t.data.status.network.wifi_connected===1?"已连接 ✅":t.data.status.network.wifi_connected===2?"未连接 ❌":"未知",t.data.status.network.wifi_connected===1?"yes":t.data.status.network.wifi_connected===2?"no":""],wifiSSID:t.data.status.network.wifi_ssid,mobileDataActive:[t.data.status.network.mobile_data_active===1?"已激活 ✅":t.data.status.network.mobile_data_active===2?"未激活 ❌":"未知",t.data.status.network.mobile_data_active===1?"yes":t.data.status.network.mobile_data_active===2?"no":""],mobileSignalDbm:t.data.status.network.mobile_signal_dbm+" dBm",networkType:t.data.status.network.network_type,trafficUsedMb:this.formatTraffic(t.data.status.network.traffic_used_mb),uploadSpeedKbps:this.formatSpeed(t.data.status.network.upload_speed_kbps),downloadSpeedKbps:this.formatSpeed(t.data.status.network.download_speed_kbps)},foreground:{appName:t.data.status.foreground.app_name,appTitle:t.data.status.foreground.app_title,speakerPlaying:[t.data.status.foreground.speaker_playing===1?"正在播放 ✅":t.data.status.foreground.speaker_playing===2?"未播放 ❌":"未知",t.data.status.foreground.speaker_playing===1?"yes":t.data.status.foreground.speaker_playing===2?"no":""]},other:{screenOn:[t.data.status.other.screen_on===1?"屏幕已打开 ✅":t.data.status.other.screen_on===2?"屏幕已关闭 ❌":"未知",t.data.status.other.screen_on===1?"yes":t.data.status.other.screen_on===2?"no":""],isChargingViaUSB:[t.data.status.other.is_charging_via_usb===1?"通过 USB 充电 ✅":t.data.status.other.is_charging_via_usb===2?"未通过 USB 充电 ❌":"未知",t.data.status.other.is_charging_via_usb===1?"yes":t.data.status.other.is_charging_via_usb===2?"no":""],isChargingViaAC:[t.data.status.other.is_charging_via_ac===1?"通过 AC 充电 ✅":t.data.status.other.is_charging_via_ac===2?"未通过 AC 充电 ❌":"未知",t.data.status.other.is_charging_via_ac===1?"yes":t.data.status.other.is_charging_via_ac===2?"no":""],isLowPowerMode:[t.data.status.other.is_low_power_mode===1?"低功耗模式 ✅":t.data.status.other.is_low_power_mode===2?"非低功耗模式 ❌":"未知",t.data.status.other.is_low_power_mode===1?"yes":t.data.status.other.is_low_power_mode===2?"no":""]}}}catch(t){console.error(t),this.$toast.error("获取状态失败")}},formatTimestamp(i){const t=new Date(i*1e3),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),e=String(t.getDate()).padStart(2,"0"),l=String(t.getHours()).padStart(2,"0"),p=String(t.getMinutes()).padStart(2,"0"),d=String(t.getSeconds()).padStart(2,"0");return`${n}-${r}-${e} ${l}:${p}:${d}`},formatCapacity(i){return i>=1e3?(i/1e3).toFixed(2)+" Ah":i.toFixed(0)+" mAh"},formatTraffic(i){return i>=1024?(i/1024).toFixed(2)+" GB":i+" MB"},formatSpeed(i){return i>=1e6?(i/1e6).toFixed(2)+" Gbps":i>=1e3?(i/1e3).toFixed(2)+" Mbps":i+" Kbps"}}},b={class:"device"},S={class:"status-grid"},h={class:"status-card"},k=["title"],y=["title"],v={class:"status-card"},C=["title"],D=["title"],A=["title"],T=["title"],U={class:"status-card"},M=["title"],B=["title"],N={class:"status-card"},O=["title"],I=["title"],V=["title"],P=["title"],x={class:"status-card"},F=["title"],L=["title"],E={class:"status-card"},K=["title"],R=["title"],G=["title"],H={class:"status-card"},Y=["title"],J=["title"],W=["title"],z=["title"],j={class:"status-card code"},q={ref:"original"};function Q(i,t,n,r,e,l){return _(),m("div",b,[s("h1",null,a(this.status.timestamp[0]),1),s("div",S,[s("div",h,[t[2]||(t[2]=s("div",{class:"title"},"📱 设备状态",-1)),s("p",{title:e.status.device_id},[t[0]||(t[0]=s("span",{class:"item-title"},"设备ID: ",-1)),s("span",null,a(e.status.device_id),1)],8,k),s("p",{title:e.status.timestamp[1]},[t[1]||(t[1]=s("span",{class:"item-title"},"时效性: ",-1)),s("span",null,a(e.status.timestamp[1]),1)],8,y)]),s("div",v,[t[7]||(t[7]=s("div",{class:"title"},"🔋 电池状态",-1)),s("p",{title:e.status.battery.charging[0]},[t[3]||(t[3]=s("span",{class:"item-title"},"充电状态: ",-1)),s("span",{class:o(e.status.battery.charging[1])},a(e.status.battery.charging[0]),3)],8,C),s("p",{title:e.status.battery.level},[t[4]||(t[4]=s("span",{class:"item-title"},"电量: ",-1)),s("span",null,a(e.status.battery.level),1)],8,D),s("p",{title:e.status.battery.temperature},[t[5]||(t[5]=s("span",{class:"item-title"},"温度: ",-1)),s("span",null,a(e.status.battery.temperature),1)],8,A),s("p",{title:e.status.battery.capacity},[t[6]||(t[6]=s("span",{class:"item-title"},"电池总容量: ",-1)),s("span",null,a(e.status.battery.capacity),1)],8,T)]),s("div",U,[t[10]||(t[10]=s("div",{class:"title"},"📶 网络状态",-1)),s("p",{title:e.status.network.wifiConnected[0]},[t[8]||(t[8]=s("span",{class:"item-title"},"WiFi: ",-1)),s("span",{class:o(e.status.network.wifiConnected[1])},a(e.status.network.wifiConnected[0]),3)],8,M),s("p",{title:e.status.network.wifiSSID},[t[9]||(t[9]=s("span",{class:"item-title"},"WiFi名称: ",-1)),s("span",null,a(e.status.network.wifiSSID),1)],8,B)]),s("div",N,[t[15]||(t[15]=s("div",{class:"title"},"📶 流量状态",-1)),s("p",{title:e.status.network.mobileDataActive[0]},[t[11]||(t[11]=s("span",{class:"item-title"},"是否启用流量: ",-1)),s("span",{class:o(e.status.network.mobileDataActive[1])},a(e.status.network.mobileDataActive[0]),3)],8,O),s("p",{title:e.status.network.mobileSignalDbm},[t[12]||(t[12]=s("span",{class:"item-title"},"移动网络信号强度: ",-1)),s("span",null,a(e.status.network.mobileSignalDbm),1)],8,I),s("p",{title:e.status.networkType},[t[13]||(t[13]=s("span",{class:"item-title"},"网络类型: ",-1)),s("span",null,a(e.status.network.networkType),1)],8,V),s("p",{title:e.status.network.trafficUsedMb},[t[14]||(t[14]=s("span",{class:"item-title"},"今日流量使用: ",-1)),s("span",null,a(e.status.network.trafficUsedMb),1)],8,P)]),s("div",x,[t[18]||(t[18]=s("div",{class:"title"},"💨 网速状态",-1)),s("p",{title:e.status.network.uploadSpeedKbps},[t[16]||(t[16]=s("span",{class:"item-title"},"上传速度: ",-1)),s("span",null,a(e.status.network.uploadSpeedKbps),1)],8,F),s("p",{title:e.status.network.downloadSpeedKbps},[t[17]||(t[17]=s("span",{class:"item-title"},"下载速度: ",-1)),s("span",null,a(e.status.network.downloadSpeedKbps),1)],8,L)]),s("div",E,[t[22]||(t[22]=s("div",{class:"title"},"🖥️ 前台应用状态",-1)),s("p",{title:e.status.foreground.appName},[t[19]||(t[19]=s("span",{class:"item-title"},"前台包名: ",-1)),s("span",null,a(e.status.foreground.appName),1)],8,K),s("p",{title:e.status.foreground.appTitle},[t[20]||(t[20]=s("span",{class:"item-title"},"窗口标题: ",-1)),s("span",null,a(e.status.foreground.appTitle),1)],8,R),s("p",{title:e.status.foreground.speakerPlaying[0]},[t[21]||(t[21]=s("span",{class:"item-title"},"扬声器播放: ",-1)),s("span",{class:o(e.status.foreground.speakerPlaying[1])},a(e.status.foreground.speakerPlaying[0]),3)],8,G)]),s("div",H,[t[27]||(t[27]=s("p",{class:"title"},"⚙️ 其他状态",-1)),s("p",{title:e.status.other.screenOn[0]},[t[23]||(t[23]=s("span",{class:"item-title"},"屏幕点亮: ",-1)),s("span",{class:o(e.status.other.screenOn[1])},a(e.status.other.screenOn[0]),3)],8,Y),s("p",{title:e.status.other.isChargingViaUSB[0]},[t[24]||(t[24]=s("span",{class:"item-title"},"USB充电: ",-1)),s("span",{class:o(e.status.other.isChargingViaUSB[1])},a(e.status.other.isChargingViaUSB[0]),3)],8,J),s("p",{title:e.status.other.isChargingViaAC[0]},[t[25]||(t[25]=s("span",{class:"item-title"},"AC充电: ",-1)),s("span",{class:o(e.status.other.isChargingViaAC[1])},a(e.status.other.isChargingViaAC[0]),3)],8,W),s("p",{title:e.status.other.isLowPowerMode[0]},[t[26]||(t[26]=s("span",{class:"item-title"},"省电模式: ",-1)),s("span",{class:o(e.status.other.isLowPowerMode[1])},a(e.status.other.isLowPowerMode[0]),3)],8,z)])]),s("div",j,[t[28]||(t[28]=s("p",{class:"title"},"🈚 原始响应",-1)),s("pre",null,[s("code",q,null,512)])])])}const $=g(f,[["render",Q],["__scopeId","data-v-7733d5c6"]]);export{$ as default};
