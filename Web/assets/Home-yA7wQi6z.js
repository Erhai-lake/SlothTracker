import{a as f}from"./index-NIGUFBhG.js";import{_ as D,r as p,c as n,o as r,a as d,w as o,b as i,t as a,d as v,F as _,e as u,f as m,g}from"./index-RZTBS0IC.js";import{T as y,a as k}from"./TabsTab-BulFDIIk.js";const I={name:"Home",components:{TabsTab:k,Tabs:y},data(){return{activeTab:"current",config:{},device:{name:"",platform:"",description:""},accountDevices:[],shareDevices:[]}},mounted(){g.on("refresh",this.refresh)},beforeUnmount(){g.off("refresh",this.refresh)},created(){this.refresh()},methods:{refresh(){this.config=JSON.parse(localStorage.getItem("config")),this.getDevice(),this.getAccountDevices(),this.getShareDevices()},async getDevice(){try{const e=await f.get(`${this.config.serverUrl}/api/device/${this.config.deviceId}`);if(e.data.code!==0){this.$toast.error(e.data.message);return}this.device.name=e.data.device.name,this.device.platform=e.data.device.platform,this.device.description=e.data.device.description}catch(e){console.error(e),this.$toast.error("获取设备信息错误")}},async getAccountDevices(){try{const e=await f.get(`${this.config.serverUrl}/api/devices/${this.config.userId}`);if(e.data.code!==0){this.$toast.error(e.data.message);return}this.accountDevices=e.data.devices}catch(e){console.error(e),this.$toast.error("获取设备信息错误")}},async getShareDevices(){try{const e=await f.get(`${this.config.serverUrl}/api/devices/shared/${this.config.userId}`);if(e.data.code!==0){this.$toast.error(e.data.message);return}this.shareDevices=e.data.devices}catch(e){console.error(e),this.$toast.error("获取设备信息错误")}}}},S={class:"home"},T={class:"item"},x=["title"],V=["title"],w=["title"],B={key:0,class:"default"},U={key:1,class:"item"},E=["title"],N=["title"],$=["title"],R={key:0,class:"default"},A={key:1,class:"item"},C=["title"],F=["title"],H=["title"];function J(e,c,L,O,s,j){const l=p("router-link"),h=p("tabs-tab"),b=p("tabs");return r(),n("div",S,[d(b,{modelValue:s.activeTab,"onUpdate:modelValue":c[0]||(c[0]=t=>s.activeTab=t)},{default:o(()=>[d(h,{name:"current"},{label:o(()=>c[1]||(c[1]=[v("当前",-1)])),default:o(()=>[i("div",T,[d(l,{to:"/"+this.config.deviceId,class:"container"},{default:o(()=>[i("p",{title:s.device.name},a(s.device.name),9,x),i("p",{title:s.device.platform},a(s.device.platform),9,V),i("p",{title:s.device.description},a(s.device.description),9,w)]),_:1},8,["to"])])]),_:1}),d(h,{name:"account"},{label:o(()=>c[2]||(c[2]=[v("账户",-1)])),default:o(()=>[(s.accountDevices||[]).length===0?(r(),n("div",B,"没有设备")):(r(),n("div",U,[(r(!0),n(_,null,u(s.accountDevices,t=>(r(),m(l,{class:"container",to:"/"+t.id,key:t.ID},{default:o(()=>[i("p",{title:t.name},a(t.name),9,E),i("p",{title:t.platform},a(t.platform),9,N),i("p",{title:t.description},a(t.description),9,$)]),_:2},1032,["to"]))),128))]))]),_:1}),d(h,{name:"share"},{label:o(()=>c[3]||(c[3]=[v("共享",-1)])),default:o(()=>[(s.shareDevices||[]).length===0?(r(),n("div",R,"没有设备")):(r(),n("div",A,[(r(!0),n(_,null,u(s.shareDevices,t=>(r(),m(l,{class:"container",to:"/"+t.id,key:t.ID},{default:o(()=>[i("p",{title:t.name},a(t.name),9,C),i("p",{title:t.platform},a(t.platform),9,F),i("p",{title:t.description},a(t.description),9,H)]),_:2},1032,["to"]))),128))]))]),_:1})]),_:1},8,["modelValue"])])}const K=D(I,[["render",J],["__scopeId","data-v-7555c884"]]);export{K as default};
